local lib = loadstring(game:HttpGet("https://pastebin.com/raw/5C1RDyaU", true))()
local window = lib:CreateWindow("Main")
local plr = game.Players.LocalPlayer

local espEnabled = false
local killAura = false
local killingAll = false

local dontKillForSpawnkilling = {}

local ESP_ = Instance.new("BillboardGui")
ESP_.Name = "ESP_"
ESP_.Active = true
ESP_.ExtentsOffset = Vector3.new(0, 1.5, 0)
ESP_.AlwaysOnTop = true
ESP_.Size = UDim2.new(2, 100, 1, 13)

local Name_ = Instance.new("TextLabel")
Name_.Name = "Name_"
Name_.Size = UDim2.new(1, 0, 1, 0)
Name_.BackgroundTransparency = 1
Name_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Name_.FontSize = Enum.FontSize.Size14
Name_.TextStrokeTransparency = 0.7
Name_.TextSize = 14
Name_.TextColor3 = Color3.fromRGB(255, 255, 255)
Name_.Text = "Only20Characters"
Name_.TextWrap = true
Name_.Font = Enum.Font.SourceSansSemibold
Name_.TextWrapped = true
Name_.TextScaled = true
Name_.Parent = ESP_

local Studs_ = Instance.new("TextLabel")
Studs_.Name = "Studs_"
Studs_.Size = UDim2.new(1, 0, 0.75, 0)
Studs_.BackgroundTransparency = 1
Studs_.Position = UDim2.new(0, 0, -0.35, 0)
Studs_.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Studs_.FontSize = Enum.FontSize.Size14
Studs_.TextStrokeTransparency = 0.7
Studs_.TextSize = 14
Studs_.TextColor3 = Color3.fromRGB(255, 255, 255)
Studs_.Text = "[0]"
Studs_.TextWrap = true
Studs_.Font = Enum.Font.SourceSansSemibold
Studs_.TextWrapped = true
Studs_.TextScaled = true
Studs_.Parent = ESP_

local espColor = Color3.fromRGB(255,255,255)

function highlightModel(objObject,bool)
	if espEnabled then
		for i,v in pairs(objObject:GetChildren())do
			if v:IsA('BasePart')and v.Name~='HumanoidRootPart'then
				local bHA=Instance.new('BoxHandleAdornment',v)
				bHA.Adornee=v
				bHA.Size= v.Size
				bHA.Color3=espColor
				bHA.Transparency=.5
				bHA.ZIndex=1
				bHA.AlwaysOnTop=true
			end
			if #v:GetChildren()>0 then
				highlightModel(v,true)
			end
		end
		if not bool then
			if not objObject:FindFirstChild("ESP_") then
				local ESPBillboardNew = ESP_:Clone()
				ESPBillboardNew["Name_"].Text = objObject.Name
				ESPBillboardNew["Studs_"].Text = "[0]"
				ESPBillboardNew.Parent = objObject
				ESPBillboardNew.Adornee = objObject
				if objObject:FindFirstChild("Humanoid") then
					objObject.Humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.None
				end
			else
				objObject:FindFirstChild("ESP_").Enabled = true
				if objObject:FindFirstChild("Humanoid") then
					objObject.Humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.None
				end
			end
		end
	end
end

function unHighlightModel(objObject,bool)
	if not bool then
		local esp = objObject:FindFirstChild("ESP_")
		if esp then
			if objObject:FindFirstChild("Humanoid") then
				objObject.Humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.Viewer
			end
			esp.Enabled = false
		end
	end
	for i,v in pairs(objObject:GetChildren())do
		if v:IsA'BasePart' and v:FindFirstChild'BoxHandleAdornment' then
			v.BoxHandleAdornment:Destroy()
		end
		if #v:GetChildren()>0 then
			unHighlightModel(v,bool)
		end
	end
end

function sortTeamHighlights(objPlayer)
	repeat wait() until objPlayer.Character
	if objPlayer.TeamColor~=plr.TeamColor then
		highlightModel(objPlayer.Character)
	else
		unHighlightModel(objPlayer.Character)
	end
	if objPlayer~=plr then
		objPlayer.Changed:Connect(function(strProp)
			if strProp=='TeamColor'then
				if objPlayer.TeamColor~=plr.TeamColor then
					unHighlightModel(objPlayer.Character)
					highlightModel(objPlayer.Character)
				else
					unHighlightModel(objPlayer.Character)
				end
			end
		end)
	else
		objPlayer.Changed:Connect(function(strProp)
			if strProp=='TeamColor'then
				for i,v in pairs(game.Players:GetPlayers())do
					unHighlightModel(v.Character)
					if v.TeamColor~=plr.TeamColor then
						highlightModel(v.Character)
					end
				end
			end
		end)
	end
end

spawn(function()
	while true do
		wait()
		local ee_, eee_ = plr.PlayerGui:FindFirstChild("anti_Exploit"),plr.PlayerGui:FindFirstChild("yeet")
		if ee_ or eee_ then
			ee_:Destroy()
			eee_:Destroy()
		end
		local char = plr.Character
		if char then
			local root = char:FindFirstChild("HumanoidRootPart")
			if root then
				for i, v in pairs(game.Players:GetPlayers()) do
					local char_ = v.Character
					if char_ then
						local esp = char_:FindFirstChild("ESP_")
						if esp then
							local hrp_ = char_:FindFirstChild("HumanoidRootPart") 
							if hrp_ then
								local mag = (root.Position - hrp_.Position).Magnitude 
								esp["Studs_"].Text = string.format("[%d]",mag)
							end
						end
						if killAura == true then
							local currentTime,pass = tick(),true
							for ind,tab in pairs(dontKillForSpawnkilling) do
								if tab[1]==v then
									if (currentTime - tab[2]) < 11 then
										pass = false
										break
									end
								end
							end
							if v.Character:FindFirstChild("Humanoid") and v.Character:FindFirstChild("HumanoidRootPart") then 
								if v.Character.Humanoid.Health > 0 and v.TeamColor ~= plr.TeamColor and v ~= plr and not v.Character:FindFirstChildOfClass("ForceField") then
									if pass then
										local gun
										for i, tool in pairs(plr.Backpack:GetChildren()) do
											if tool:FindFirstChild("GunScript_Local") then
												gun = tool
											end
										end
										if not gun then
											for i, tool in pairs(char:GetChildren()) do
												if tool:FindFirstChild("GunScript_Local") then
													gun = tool
												end
											end
										end
										if gun then
											local a={[1]=gun,[2]=game:GetService("Players").LocalPlayer,[3]=v.Character.Humanoid,[4]=v.Character.HumanoidRootPart,[5]=9e+09,[6]={[1]=999,[2]=999,[3]=true,[4]=true,[5]=gun.GunScript_Server.IgniteScript,[6]=gun.GunScript_Server.IcifyScript,[7]=10000000,[8]=10000000},[7]={[1]=true,[2]=50000,[3]=30000},[8]=v.Character.Head,[9]={[1]=true,[2]={[1]=5154884848},[3]=100000,[4]=1500000,[5]=100000}}
											game:GetService("ReplicatedStorage").InflictTarget:InvokeServer(unpack(a))
										end
									end
								end
							end
						end
					end
				end
			end
		end
	end
end)


function registerChar(char)
	local plr = game.Players:GetPlayerFromCharacter(char)
	local setVal = false
	for ind, tab in pairs(dontKillForSpawnkilling) do
		if tab[1] == plr then
			tab[2] = tick()
			setVal = true
			break
		end
	end
	if not setVal then
		table.insert(dontKillForSpawnkilling,{plr,tick()})
	end
	if espEnabled then
		sortTeamHighlights(plr)
	end
end

function registerPlr(plr)
	if plr.Character then
		registerChar(plr.Character)
	end
	plr.CharacterAdded:Connect(registerChar)
end

for i, v in pairs(game.Players:GetPlayers()) do
	registerPlr(v)
end

local plrAdded = game.Players.PlayerAdded:Connect(registerPlr)


function bypassTPAntiCheat()
	local char = plr.Character
	local root = char.HumanoidRootPart
	char.Humanoid.PlatformStand = true 
	if not root:FindFirstChild("BodyGyro") then
		local bg = Instance.new("BodyGyro")
		bg.MaxTorque = Vector3.new(9e+09,9e+09,9e+09)
		bg.P = 90000
		bg.Parent = root
	end
	if not root:FindFirstChild("BodyVelocity") then
		local bv = Instance.new("BodyVelocity")
		bv.MaxForce = Vector3.new(9e+09,9e+09,9e+09)
		bv.P = 1250
		bv.Velocity = Vector3.new(0,0,0)
		bv.Parent = root
	end
end

function removeAntiCheatBypass()
	local char = plr.Character
	local root = char.HumanoidRootPart
	char.Humanoid.PlatformStand = false 
	root:FindFirstChild("BodyGyro"):Destroy()
	root:FindFirstChild("BodyVelocity"):Destroy()
end

window:AddButton("Kill All",function()
	if killAura then
		if killingAll then
			game.StarterGui:SetCore("SendNotification", {
				Title = "Error"; 
				Icon = "rbxassetid://6877814567";
				Text = "You are already doing this"; 
				Duration = 3; 
			})
		else
			killingAll =true
			local pos = plr.Character.HumanoidRootPart.Position
			for _ind, playerTarget in pairs(game.Players:GetPlayers()) do
				if playerTarget.Character and playerTarget.Character:FindFirstChild("Humanoid") then
					if playerTarget.Character.Humanoid.Health > 0 and playerTarget.TeamColor ~= plr.TeamColor and playerTarget ~= plr then
						repeat wait() print("Waiting ") until plr.Character and plr.Character:FindFirstChild("Humanoid")  and plr.Character:FindFirstChild("HumanoidRootPart") 

						print("Killing "..playerTarget.Name)
						bypassTPAntiCheat()
						local c = os.clock()
						repeat 
							wait()
							--[[local currentTime,pass = tick(),true
							for ind,tab in pairs(dontKillForSpawnkilling) do
								if tab[1]==playerTarget then
									if (currentTime - tab[2]) < 10 then
										pass = false
										break
									end
								end
							end
							if not pass then
								break
							end]]
							if not plr.Character then
								print("Waiting for new character")
								plr.CharacterAdded:Wait()
								break
							end
							if not plr.Character:FindFirstChild("Humanoid") then
								break
							end
							if plr.Character:FindFirstChild("Humanoid") then
								if plr.Character:FindFirstChild("Humanoid").Health <= 0 then
									plr.CharacterAdded:Wait()
									break
								end
							end

							if playerTarget.Character then
								if not playerTarget.Character:FindFirstChild("Humanoid")  then
									warn("Broke loop because couldnt find hum")
									break
								end
								if not playerTarget.Character:FindFirstChild("HumanoidRootPart") then
									warn("Broke loop because couldnt find root")
									break
								end
								if playerTarget.Character:FindFirstChild("Humanoid") then
									if playerTarget.Character:FindFirstChild("Humanoid").Health <= 0 then
										warn("Player died!")
										break
									end
								end
								if playerTarget.Character:FindFirstChildOfClass("ForceField") then
									break
								end
								plr.Character:MoveTo(playerTarget.Character.HumanoidRootPart.Position+Vector3.new(0,25,0))
								game.RunService.RenderStepped:Wait() 
							else
								break 
							end 
						until (os.clock() - c) > 2
					end
				end
			end
			killingAll =false
			repeat wait() until plr.Character
			bypassTPAntiCheat()
			plr.Character:MoveTo(pos)
			wait(1.5)
			removeAntiCheatBypass()
			game.StarterGui:SetCore("SendNotification", {
				Title = "Done!"; 
				Text = "Wait a bit before doing it again, or you will die because of spawnkilling probably";
				Duration = 2.5; 
			})
		end
	else
		game.StarterGui:SetCore("SendNotification", {
			Title = "Kill Aura"; 
			Text = "Enable kill aura to use this";
			Duration = 3; 
		})
	end
end)

window:AddToggle("Kill Aura", function()
	killAura = not killAura
end)

local islandWindow = lib:CreateWindow("Island TP")
local oilRigWindow = lib:CreateWindow("Oil Rig TP")
local TPing = false
local function teleportIsland(pos)
	local char = plr.Character
	if char then
		local root = char:FindFirstChild("HumanoidRootPart")
		if root and not TPing then
			TPing = true
		--	local pos = workspace.land.island[choice].spots:GetChildren()[1].Position+Vector3.new(0,5,0)
			--tpBypass(pos.X,pos.Y,pos.Z)
			bypassTPAntiCheat()
			wait(.1)
			char:MoveTo(pos)
			wait(1.5)
			removeAntiCheatBypass()
			TPing = false
		end
	end
end

local bountyAmount = 99999
window:AddButton("Bounty All",function()
	for i, v in pairs(game.Players:GetPlayers()) do
		local args = {
			[1] = v.Name,
			[2] = bountyAmount,
		}
		
		game:GetService("ReplicatedStorage").Remote.bounty:FireServer(unpack(args))
		wait()
	end
end)
window:AddSlider("Bounty Amount",0,9999999,9999999,function(var)
	bountyAmount = var
end)

--title, minvalue, maxvalue, startpoint, callback

local islands = {"Seaside Isle", "Checkpoint SAM","Miday Island","Checkpoint DAYSN","Mount Frigus"}
for i, v in pairs(islands) do
	islandWindow:AddButton(v,function()
		teleportIsland(workspace.land.island[v].spots:GetChildren()[1].Position+Vector3.new(0,5,0))
	end)
end
local oilRigs = {"Soviet State Industrial Rig", "RSU Oil Research Platform","Yeezy Gas Inc. Rig","Amerigas Oil Platform","Bloxxon Oil Platform","AMZN Industries Oil Rig #2","Europetrol Oil Rig","Unnamed Abandoned Rig"}
for i, v in pairs(oilRigs) do
	oilRigWindow:AddButton(v,function()
		teleportIsland(workspace.land.final[v].flag.Flag.Position+Vector3.new(0,5,0))
	end)
end

local extra = lib:CreateWindow("Extra")
local loaded = false
extra:AddButton("Load Infinite Yield",function()
	loaded = true
	loadstring(game:HttpGet(('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'),true))()
end)
local ESPenabled = false
window:AddToggle("ESP", function()
	ESPenabled = not ESPenabled
	if ESPenabled then
		espEnabled = true
		for i, v in pairs(game.Players:GetChildren()) do
			if v.Character then
				sortTeamHighlights(v)
			end
		end
	else
		espEnabled = false
		for i, v in pairs(game.Players:GetChildren()) do
			if v.Character then
				unHighlightModel(v.Character)
			end
		end
	end
end)
